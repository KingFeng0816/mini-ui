'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = Notify;

var _color = require('./../common/color.js');

var defaultOptions = {
    selector: '#van-notify',
    type: 'danger',
    message: '',
    background: '',
    duration: 3000,
    zIndex: 110,
    color: _color.WHITE,
    onClick: function onClick() {},
    onOpened: function onOpened() {},
    onClose: function onClose() {}
};
function parseOptions(message) {
    return typeof message === 'string' ? { message: message } : message;
}
function getContext() {
    var pages = getCurrentPages();
    return pages[pages.length - 1];
}
function Notify(options) {
    options = Object.assign({}, defaultOptions, parseOptions(options));
    var context = options.context || getContext();
    var notify = context.selectComponent(options.selector);
    delete options.context;
    delete options.selector;
    if (notify) {
        notify.set(options);
        notify.show();
        return notify;
    }
    console.warn('未找到 van-notify 节点，请确认 selector 及 context 是否正确');
}
Notify.clear = function (options) {
    options = Object.assign({}, defaultOptions, parseOptions(options));
    var context = options.context || getContext();
    var notify = context.selectComponent(options.selector);
    if (notify) {
        notify.hide();
    }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdGlmeS5qcyJdLCJuYW1lcyI6WyJOb3RpZnkiLCJkZWZhdWx0T3B0aW9ucyIsInNlbGVjdG9yIiwidHlwZSIsIm1lc3NhZ2UiLCJiYWNrZ3JvdW5kIiwiZHVyYXRpb24iLCJ6SW5kZXgiLCJjb2xvciIsIldISVRFIiwib25DbGljayIsIm9uT3BlbmVkIiwib25DbG9zZSIsInBhcnNlT3B0aW9ucyIsImdldENvbnRleHQiLCJwYWdlcyIsImdldEN1cnJlbnRQYWdlcyIsImxlbmd0aCIsIm9wdGlvbnMiLCJPYmplY3QiLCJhc3NpZ24iLCJjb250ZXh0Iiwibm90aWZ5Iiwic2VsZWN0Q29tcG9uZW50Iiwic2V0Iiwic2hvdyIsImNvbnNvbGUiLCJ3YXJuIiwiY2xlYXIiLCJoaWRlIl0sIm1hcHBpbmdzIjoiOzs7OztrQkFvQndCQSxNOztBQXBCeEI7O0FBQ0EsSUFBTUMsaUJBQWlCO0FBQ25CQyxjQUFVLGFBRFM7QUFFbkJDLFVBQU0sUUFGYTtBQUduQkMsYUFBUyxFQUhVO0FBSW5CQyxnQkFBWSxFQUpPO0FBS25CQyxjQUFVLElBTFM7QUFNbkJDLFlBQVEsR0FOVztBQU9uQkMsV0FBT0MsWUFQWTtBQVFuQkMsYUFBUyxtQkFBTSxDQUFHLENBUkM7QUFTbkJDLGNBQVUsb0JBQU0sQ0FBRyxDQVRBO0FBVW5CQyxhQUFTLG1CQUFNLENBQUc7QUFWQyxDQUF2QjtBQVlBLFNBQVNDLFlBQVQsQ0FBc0JULE9BQXRCLEVBQStCO0FBQzNCLFdBQU8sT0FBT0EsT0FBUCxLQUFtQixRQUFuQixHQUE4QixFQUFFQSxnQkFBRixFQUE5QixHQUE0Q0EsT0FBbkQ7QUFDSDtBQUNELFNBQVNVLFVBQVQsR0FBc0I7QUFDbEIsUUFBTUMsUUFBUUMsaUJBQWQ7QUFDQSxXQUFPRCxNQUFNQSxNQUFNRSxNQUFOLEdBQWUsQ0FBckIsQ0FBUDtBQUNIO0FBQ2MsU0FBU2pCLE1BQVQsQ0FBZ0JrQixPQUFoQixFQUF5QjtBQUNwQ0EsY0FBVUMsT0FBT0MsTUFBUCxDQUFjLEVBQWQsRUFBa0JuQixjQUFsQixFQUFrQ1ksYUFBYUssT0FBYixDQUFsQyxDQUFWO0FBQ0EsUUFBTUcsVUFBVUgsUUFBUUcsT0FBUixJQUFtQlAsWUFBbkM7QUFDQSxRQUFNUSxTQUFTRCxRQUFRRSxlQUFSLENBQXdCTCxRQUFRaEIsUUFBaEMsQ0FBZjtBQUNBLFdBQU9nQixRQUFRRyxPQUFmO0FBQ0EsV0FBT0gsUUFBUWhCLFFBQWY7QUFDQSxRQUFJb0IsTUFBSixFQUFZO0FBQ1JBLGVBQU9FLEdBQVAsQ0FBV04sT0FBWDtBQUNBSSxlQUFPRyxJQUFQO0FBQ0EsZUFBT0gsTUFBUDtBQUNIO0FBQ0RJLFlBQVFDLElBQVIsQ0FBYSwrQ0FBYjtBQUNIO0FBQ0QzQixPQUFPNEIsS0FBUCxHQUFlLFVBQVVWLE9BQVYsRUFBbUI7QUFDOUJBLGNBQVVDLE9BQU9DLE1BQVAsQ0FBYyxFQUFkLEVBQWtCbkIsY0FBbEIsRUFBa0NZLGFBQWFLLE9BQWIsQ0FBbEMsQ0FBVjtBQUNBLFFBQU1HLFVBQVVILFFBQVFHLE9BQVIsSUFBbUJQLFlBQW5DO0FBQ0EsUUFBTVEsU0FBU0QsUUFBUUUsZUFBUixDQUF3QkwsUUFBUWhCLFFBQWhDLENBQWY7QUFDQSxRQUFJb0IsTUFBSixFQUFZO0FBQ1JBLGVBQU9PLElBQVA7QUFDSDtBQUNKLENBUEQiLCJmaWxlIjoibm90aWZ5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgV0hJVEUgfSBmcm9tICcuLi9jb21tb24vY29sb3InO1xuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgc2VsZWN0b3I6ICcjdmFuLW5vdGlmeScsXG4gICAgdHlwZTogJ2RhbmdlcicsXG4gICAgbWVzc2FnZTogJycsXG4gICAgYmFja2dyb3VuZDogJycsXG4gICAgZHVyYXRpb246IDMwMDAsXG4gICAgekluZGV4OiAxMTAsXG4gICAgY29sb3I6IFdISVRFLFxuICAgIG9uQ2xpY2s6ICgpID0+IHsgfSxcbiAgICBvbk9wZW5lZDogKCkgPT4geyB9LFxuICAgIG9uQ2xvc2U6ICgpID0+IHsgfVxufTtcbmZ1bmN0aW9uIHBhcnNlT3B0aW9ucyhtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJyA/IHsgbWVzc2FnZSB9IDogbWVzc2FnZTtcbn1cbmZ1bmN0aW9uIGdldENvbnRleHQoKSB7XG4gICAgY29uc3QgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKTtcbiAgICByZXR1cm4gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV07XG59XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBOb3RpZnkob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgcGFyc2VPcHRpb25zKG9wdGlvbnMpKTtcbiAgICBjb25zdCBjb250ZXh0ID0gb3B0aW9ucy5jb250ZXh0IHx8IGdldENvbnRleHQoKTtcbiAgICBjb25zdCBub3RpZnkgPSBjb250ZXh0LnNlbGVjdENvbXBvbmVudChvcHRpb25zLnNlbGVjdG9yKTtcbiAgICBkZWxldGUgb3B0aW9ucy5jb250ZXh0O1xuICAgIGRlbGV0ZSBvcHRpb25zLnNlbGVjdG9yO1xuICAgIGlmIChub3RpZnkpIHtcbiAgICAgICAgbm90aWZ5LnNldChvcHRpb25zKTtcbiAgICAgICAgbm90aWZ5LnNob3coKTtcbiAgICAgICAgcmV0dXJuIG5vdGlmeTtcbiAgICB9XG4gICAgY29uc29sZS53YXJuKCfmnKrmib7liLAgdmFuLW5vdGlmeSDoioLngrnvvIzor7fnoa7orqQgc2VsZWN0b3Ig5Y+KIGNvbnRleHQg5piv5ZCm5q2j56GuJyk7XG59XG5Ob3RpZnkuY2xlYXIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgcGFyc2VPcHRpb25zKG9wdGlvbnMpKTtcbiAgICBjb25zdCBjb250ZXh0ID0gb3B0aW9ucy5jb250ZXh0IHx8IGdldENvbnRleHQoKTtcbiAgICBjb25zdCBub3RpZnkgPSBjb250ZXh0LnNlbGVjdENvbXBvbmVudChvcHRpb25zLnNlbGVjdG9yKTtcbiAgICBpZiAobm90aWZ5KSB7XG4gICAgICAgIG5vdGlmeS5oaWRlKCk7XG4gICAgfVxufTtcbiJdfQ==